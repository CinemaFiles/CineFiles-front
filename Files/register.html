<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>inicio</title>
    <link rel="stylesheet" href="../Styles/register.css">
    <link href="https://fonts.cdnfonts.com/css/wildest" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/barcade" rel="stylesheet">
    
</head>
<body>
    <header class="header">
        <div>
            <a href="#" class="logoPS">CineFiles</a>
            <a href="#" class="logoPS">CineFiles</a>
            <a href="#" class="logoPS">CineFiles</a>
            <a href="#" class="logoPS">CineFiles</a>
            <a href="#" class="logoPS">CineFiles</a>
            <a href="#" class="logoPS">CineFiles</a>
            <a href="#" class="logoPS">CineFiles</a>
            <a href="#" class="logoPS">CineFiles</a>       
        </div>
        
        
        <nav id="navbar" class="navbar">
            <a id="main" href="./index.html">Home</a>
            <a id="navigate" href="./navigate.html">Navigate</a>
            <a id="login" href="./login.html">Login</a>
            <a id="account" href="#">Account</a> 
        </nav>
    </header>

    <section class="register">
        <div class="form-box">
            <div id="form-div" class="form-value">
                <form class="registerf">
                    <h2>Register</h2>
                    <div class="inputbox">
                        <ion-icon name="mail-outline"></ion-icon>
                        <input type="email" required id="email" name ="email-input">
                        <label for="email">Correo</label>
                    </div>
                    <div class="inputbox">
                        <ion-icon name="user-outline"></ion-icon>
                        <input type="user" required id="user" name = "usuario-input" >
                        <label for="usuario-input">Usuario</label>
                    </div>
                    <div class="inputbox">
                        <ion-icon name="lock-closed-outline"></ion-icon>
                        <input type="password" required id="password" name = "password-input">
                        <label for="password-input">Contrase√±a</label>
                    </div>
                    <button type="button" id="registerbutton">Register</button>
                </form>
            </div>
        </div>
    </section>

    <script>
        const url = "https://cinefiles-backend.onrender.com" + "/auth";
const email = document.getElementById('email');
const user = document.getElementById('user');
const password = document.getElementById('password');

//no se pueden usar promesas en reacts

const register = async(event)=>{
    event.preventDefault();
    const response = await fetch(url+"/register", {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            name: user.value,
            email: email.value,
            password: password.value
        })
    }).then(response => response.json().then( data => {
        
        console.log(data);
        if(data.status === 200){
            alert("Usuario registrado correctamente");
            window.location.href = "login.html";
            }
        }
    )
).catch(error => console.log(error));
    console.log(error);
}


document.getElementById('registerbutton').addEventListener('click', register)
    </script>
    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.1.9/build/spline-viewer.js"></script>
    <spline-viewer url="https://prod.spline.design/OKO2TjrSPYX0H9Sr/scene.splinecode"></spline-viewer>
</body>
</html>